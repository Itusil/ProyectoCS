<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="release" name="TVRenamer build script">
	<property file="build.properties" />

	<property name="src.main" value="src" />
	<property name="bin" value="bin" />
	<property name="lib" value="lib" />
	<property name="res" value="res" />
	<property name="rel" value="release" />
	<property name="version" value="0.4" />
	<property name="launch4j" value="C:/launch4j" />

	<taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask" classpath="${launch4j}/launch4j.jar:${launch4j}/lib/xstream.jar" />

	<!--
	<target name="compile">
		<javac srcdir="${src.main}" destdir="${build}" classpath="${lib}/swt-win32.jar" />
	</target>
	-->

	<target name="jar-win32" description="Create Runnable Jar for Project TVRenamer">
		<jar destfile="${rel}/tvrenamer-win32.jar" filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Built-By" value="Vipul Delwadia" />
				<attribute name="Main-Class" value="com.google.code.tvrenamer.view.UIStarter" />
			</manifest>
			<fileset dir="${bin}" />
			<fileset dir="${res}" />
			<zipfileset src="${lib}/swt-win32.jar" />
		</jar>
	</target>

	<target name="jar-win64" description="Create Runnable Jar for Project TVRenamer">
		<jar destfile="${rel}/tvrenamer-win64.jar" filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Built-By" value="Vipul Delwadia" />
				<attribute name="Main-Class" value="com.google.code.tvrenamer.view.UIStarter" />
			</manifest>
			<fileset dir="${bin}" />
			<fileset dir="${res}" />
			<zipfileset src="${lib}/swt-win64.jar" />
		</jar>
	</target>

	<target depends="clean, jar-win32, jar-win64" name="release">
		<!-- Create the .exe with launch4j -->
		<launch4j>
			<config headerType="gui" outfile="${rel}/TVRenamer-${version}-x86.exe" dontWrapJar="false" jar="${rel}/tvrenamer-win32.jar" icon="${res}\icons\oldschool-tv-icon.ico" chdir=".">
				<jre minVersion="1.5.0" />
			</config>
		</launch4j>

		<launch4j>
			<config headerType="gui" outfile="${rel}/TVRenamer-${version}-x64.exe" dontWrapJar="false" jar="${rel}/tvrenamer-win64.jar" icon="${res}\icons\oldschool-tv-icon.ico" chdir=".">
				<jre minVersion="1.5.0" />
			</config>
		</launch4j>
	</target>

	<target name="clean">
		<delete includeemptydirs="true">
			<fileset dir="${rel}" includes="**/*" />
		</delete>
		<mkdir dir="${rel}" />
	</target>

</project>